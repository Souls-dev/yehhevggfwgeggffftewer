local SoulsHub = loadstring(game:HttpGet("https://pandadevelopment.net/virtual/file/e7f388d3c065df7a"))();

task.wait(1)

SoulsHub:Loader(nil, 1).yield()

local FileWatcher = SoulsHub:ConfigManager({
    Directory = "SoulsHub",
    Config = "CROW-Configs"
});

local Window = SoulsHub.new({
    Keybind = "LeftAlt",
});

-- Initialize global states for features
_G.FeatureStates = _G.FeatureStates or {
    WalkSpeed = 16,
    JumpPower = 50,
    ESP_Enabled = false,
    MasterVisuals = true,
    AutoFarm_Enabled = false,
    AutoSummon_Enabled = false
}

local watermark = Window:Watermark();

watermark:AddText({
    Icon = "user",
    Text = "CROW"
})

local vim = watermark:AddText({
    Icon = "clock",
    Text = SoulsHub:GetTimeNow()
})

task.spawn(function()
    while true do task.wait()
        vim:SetText(SoulsHub:GetTimeNow())
        Window.Username = "CROW"
    end;
end)

Window:Update({
    ExpireDate = SoulsHub:GetDate(tick() + 84000)
})

watermark:AddText({
    Icon = "server",
    Text = "v1.0.5"
})

-- Create all necessary tabs
local PlayerTab = Window:DrawTab({
    Icon = "user",
    Name = "Player",
    Type = "Single"
});

local AutofarmTab = Window:DrawTab({
    Icon = "repeat",
    Name = "Autofarm",
    Type = "Single"
});

local TeleportTab = Window:DrawTab({
    Icon = "compass",
    Name = "Teleport",
    Type = "Single"
});

local ServerTab = Window:DrawTab({
    Icon = "server",
    Name = "Server",
    Type = "Single"
});

local CreditsTab = Window:DrawTab({
    Icon = "book",
    Name = "Credits",
    Type = "Single"
});

local SettingsTab = Window:DrawTab({
    Icon = "settings",
    Name = "Settings",
    Type = "Single"
});

local UpdateLogsTab = Window:DrawTab({
    Icon = "scroll",
    Name = "Update Logs",
    Type = "Single"
});

-- Check for admin and create admin tab if needed
local player = game:GetService("Players").LocalPlayer
local isAdmin = false
local AdminIds = {8205778977}
for _, adminId in ipairs(AdminIds) do
    if player.UserId == adminId then
        isAdmin = true
        break
    end
end

if isAdmin then
    local AdminTab = Window:DrawTab({
        Icon = "shield",
        Name = "Admin",
        Type = "Single"
    });
end

-- Player Tab
do
    local playerSection = PlayerTab:DrawSection({
        Name = "Player Movement",
        Position = "left"
    });
    
    local miscSection = PlayerTab:DrawSection({
        Name = "Miscellaneous",
        Position = "right"
    });
    
    -- Walk Speed
    playerSection:AddSlider({
        Name = "Walk Speed",
        Min = 16,
        Max = 100,
        Round = 0,
        Default = 16,
        Type = "studs/s",
        Callback = function(value)
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = value
                    _G.FeatureStates.WalkSpeed = value
                end
            end
        end
    });
    
    -- Jump Power
    playerSection:AddSlider({
        Name = "Jump Power",
        Min = 50,
        Max = 200,
        Round = 0,
        Default = 50,
        Type = "studs",
        Callback = function(value)
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.JumpPower = value
                    _G.FeatureStates.JumpPower = value
                end
            end
        end
    });
    
    -- Auto Claim Level Rewards
    miscSection:AddToggle({
        Name = "Auto Claim Level Rewards",
        Default = false,
        Callback = function(enabled)
            _G.FeatureStates.AutoLevelRewards = enabled
            if enabled then
                task.spawn(function()
                    while _G.FeatureStates.AutoLevelRewards do
                        local success, result = pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("LevelRewardsEvent"):FireServer()
                        end)
                        task.wait(5)
                    end
                end)
            end
        end
    });
    
    -- Auto Claim Pass Rewards
    miscSection:AddToggle({
        Name = "Auto Claim Pass Rewards",
        Default = false,
        Callback = function(enabled)
            _G.FeatureStates.AutoPassRewards = enabled
            if enabled then
                task.spawn(function()
                    while _G.FeatureStates.AutoPassRewards do
                        local args = { [1] = "All" }
                        local success, result = pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ClaimBattlePass"):FireServer(unpack(args))
                        end)
                        task.wait(5)
                    end
                end)
            end
        end
    });
    
    -- Auto Spin Daily Wheel
    miscSection:AddToggle({
        Name = "Auto Spin Daily Wheel",
        Default = false,
        Callback = function(enabled)
            _G.FeatureStates.AutoDailyWheel = enabled
            if enabled then
                task.spawn(function()
                    while _G.FeatureStates.AutoDailyWheel do
                        local args = { [1] = "Daily", [2] = 1 }
                        local success, result = pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Wheel"):WaitForChild("Spin"):InvokeServer(unpack(args))
                        end)
                        task.wait(5)
                    end
                end)
            end
        end
    });
    
    -- Claim All Codes Button
    miscSection:AddButton({
        Name = "Claim All Codes",
        Callback = function()
            task.spawn(function()
                local contentText = game:GetService("Players").LocalPlayer.PlayerGui.UpdateLog.BG.Content.Codes.ContentText
                if contentText then
                    local fullText = contentText.Text or ""
                    local codes = {}
                    
                    for line in string.gmatch(fullText, "[^\r\n]+") do
                        local dashPosition = string.find(line, "-")
                        if dashPosition then
                            local code = string.sub(line, 1, dashPosition - 1):gsub("^%s*(.-)%s*$", "%1")
                            table.insert(codes, code)
                        end
                    end
                    
                    local claimCodeRemote = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ClaimCode")
                    for _, code in ipairs(codes) do
                        local args = { [1] = code }
                        pcall(function()
                            claimCodeRemote:InvokeServer(unpack(args))
                        end)
                        task.wait(0.5)
                    end
                end
            end)
        end
    });
end

-- Teleport Tab
do
    local teleportSection = TeleportTab:DrawSection({
        Name = "Teleport Locations",
        Position = "left"
    });
    
    -- Check if teleport parts exist
    local hasTeleportParts = pcall(function()
        return workspace:FindFirstChild("TPparts")
    end)
    
    if hasTeleportParts then
        local locations = {}
        local parts = workspace.TPparts:GetChildren()
        for _, part in ipairs(parts) do
            table.insert(locations, part.Name)
        end
        
        if #locations > 0 then
            local dropdown = teleportSection:AddDropdown({
                Name = "Select Location",
                Values = locations,
                Default = locations[1] or "",
                Multi = false,
                Callback = function(selectedName)
                    local character = player.Character
                    if character then
                        local hrp = character:FindFirstChild("HumanoidRootPart")
                        local targetPart = workspace.TPparts:FindFirstChild(selectedName)
                        if hrp and targetPart then
                            pcall(function()
                                hrp.CFrame = targetPart.CFrame
                            end)
                        end
                    end
                end
            });
        else
            teleportSection:AddParagraph({
                Title = "No Teleport Locations",
                Content = "No teleport locations found in the game."
            });
        end
    else
        teleportSection:AddParagraph({
            Title = "Feature Unavailable",
            Content = "Teleport parts not found in this game."
        });
    end
end

-- Autofarm Tab
do
    -- Story Section
    local storySection = AutofarmTab:DrawSection({
        Name = "Story",
        Position = "left"
    });
    
    local hasStory = pcall(function()
        return game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("Story")
    end)
    
    if hasStory then
        local worldDropdown = nil
        local actDropdown = nil
        local difficultyDropdown = nil
        
        -- Function to get story world options
        local function getStoryWorlds()
            local worlds = {}
            local mapsContainer = game:GetService("Players").LocalPlayer.PlayerGui.Story.BG.Content.Left.Maps
            if mapsContainer then
                for _, child in ipairs(mapsContainer:GetChildren()) do
                    if child:IsA("TextButton") then
                        table.insert(worlds, child.Text ~= "" and child.Text or child.Name)
                    end
                end
            end
            return worlds
        end
        
        -- Function to get story act options
        local function getStoryActs()
            local acts = {}
            local actsContainer = game:GetService("Players").LocalPlayer.PlayerGui.Story.BG.Content.Right.Acts.ScrollingFrame
            if actsContainer then
                for _, child in ipairs(actsContainer:GetChildren()) do
                    if child:IsA("TextButton") then
                        table.insert(acts, child.Text ~= "" and child.Text or child.Name)
                    end
                end
            end
            return acts
        end
        
        -- Function to get story difficulty options
        local function getStoryDifficulties()
            local difficulties = {}
            local diffContainer = game:GetService("Players").LocalPlayer.PlayerGui
                .Story.BG.Content.Right.Preview.Content.Top.Content.Difficulties
            if diffContainer then
                for _, child in ipairs(diffContainer:GetChildren()) do
                    if child:IsA("TextButton") then
                        table.insert(difficulties, child.Text ~= "" and child.Text or child.Name)
                    end
                end
            end
            return difficulties
        end
        
        worldDropdown = storySection:AddDropdown({
            Name = "World",
            Values = getStoryWorlds(),
            Default = "",
            Multi = false,
            Callback = function(value)
                if worldDropdown and actDropdown and difficultyDropdown then
                    actDropdown:SetValues(getStoryActs())
                    difficultyDropdown:SetValues(getStoryDifficulties())
                end
            end
        });
        
        actDropdown = storySection:AddDropdown({
            Name = "Act",
            Values = getStoryActs(),
            Default = "",
            Multi = false,
            Callback = function(value) end
        });
        
        difficultyDropdown = storySection:AddDropdown({
            Name = "Difficulty",
            Values = getStoryDifficulties(),
            Default = "",
            Multi = false,
            Callback = function(value) end
        });
        
        storySection:AddButton({
            Name = "Start Story",
            Callback = function()
                task.spawn(function()
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    local door = workspace:WaitForChild("TeleporterFolder"):WaitForChild("Story"):WaitForChild("Teleporter"):WaitForChild("Door")
                    if hrp and door then
                        pcall(function()
                            firetouchinterest(hrp, door, 0)
                            task.wait(0.2)
                            firetouchinterest(hrp, door, 1)
                        end)
                        
                        local actText = actDropdown.Value or ""
                        local actNumber = tonumber(actText:match("%d+")) or 1
                        
                        local args = {
                            [1] = tostring(worldDropdown.Value or ""),
                            [2] = actNumber,
                            [3] = tostring(difficultyDropdown.Value or ""),
                            [4] = false
                        }
                        
                        pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Story"):WaitForChild("Select"):InvokeServer(unpack(args))
                        end)
                        
                        task.wait(0.3)
                        
                        local args2 = { [1] = "Skip" }
                        pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Teleporter"):WaitForChild("Interact"):FireServer(unpack(args2))
                        end)
                    end
                end)
            end
        });
    end
    
    -- Raids Section
    local raidsSection = AutofarmTab:DrawSection({
        Name = "Raids",
        Position = "right"
    });
    
    local hasRaids = pcall(function()
        return game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("Raids")
    end)
    
    if hasRaids then
        local raidWorldDropdown = nil
        local raidActDropdown = nil
        local raidDifficultyDropdown = nil
        
        -- Function to get raid world options
        local function getRaidWorlds()
            local worlds = {}
            local raidMapsContainer = game:GetService("Players").LocalPlayer.PlayerGui.Raids.BG.Content.Left.Maps
            if raidMapsContainer then
                for _, child in ipairs(raidMapsContainer:GetChildren()) do
                    if child:IsA("TextButton") then
                        table.insert(worlds, child.Text ~= "" and child.Text or child.Name)
                    end
                end
            end
            return worlds
        end
        
        -- Function to get raid act options
        local function getRaidActs()
            local acts = {}
            local raidActsContainer = game:GetService("Players").LocalPlayer.PlayerGui.Raids.BG.Content.Right.Acts
            if raidActsContainer then
                for _, child in ipairs(raidActsContainer:GetChildren()) do
                    if child:IsA("TextButton") then
                        table.insert(acts, child.Text ~= "" and child.Text or child.Name)
                    end
                end
            end
            return acts
        end
        
        raidWorldDropdown = raidsSection:AddDropdown({
            Name = "World",
            Values = getRaidWorlds(),
            Default = "",
            Multi = false,
            Callback = function(value) end
        });
        
        raidActDropdown = raidsSection:AddDropdown({
            Name = "Act",
            Values = getRaidActs(),
            Default = "",
            Multi = false,
            Callback = function(value) end
        });
        
        raidDifficultyDropdown = raidsSection:AddDropdown({
            Name = "Difficulty",
            Values = {"Nightmare"},
            Default = "Nightmare",
            Multi = false,
            Callback = function(value) end
        });
        
        raidsSection:AddButton({
            Name = "Start Raid",
            Callback = function()
                task.spawn(function()
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    local door = workspace.TeleporterFolder.Raids.Teleporter.Door
                    if hrp and door then
                        pcall(function()
                            firetouchinterest(hrp, door, 0)
                            task.wait(0.2)
                            firetouchinterest(hrp, door, 1)
                        end)
                        
                        local actText = raidActDropdown.Value or ""
                        local actNumber = tonumber(actText:match("%d+")) or 1
                        
                        local args = {
                            [1] = tostring(raidWorldDropdown.Value or ""),
                            [2] = actNumber,
                            [3] = tostring(raidDifficultyDropdown.Value or "Nightmare"),
                            [4] = false
                        }
                        
                        pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Raids"):WaitForChild("Select"):InvokeServer(unpack(args))
                        end)
                        
                        task.wait(0.3)
                        
                        local args2 = { [1] = "Skip" }
                        pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Teleporter"):WaitForChild("Interact"):FireServer(unpack(args2))
                        end)
                    end
                end)
            end
        });
    end
    
    -- Summon Section
    local summonSection = AutofarmTab:DrawSection({
        Name = "Summon",
        Position = "left"
    });
    
    local summonDropdown = summonSection:AddDropdown({
        Name = "Summon Banner",
        Values = {"Banner 1 (Mythic)", "Banner 2 (Celestial)", "Banner 3 (Ultimate)", "Banner 4 (Skin)"},
        Default = "Banner 1 (Mythic)",
        Multi = false,
        Callback = function(value) end
    });
    
    local summonCountSlider = summonSection:AddSlider({
        Name = "Number of Summons",
        Min = 1,
        Max = 10,
        Round = 0,
        Default = 1,
        Callback = function(value) end
    });
    
    local autoSummonToggle = summonSection:AddToggle({
        Name = "Auto Summon",
        Default = false,
        Callback = function(enabled)
            _G.FeatureStates.AutoSummon_Enabled = enabled
            if enabled then
                task.spawn(function()
                    while _G.FeatureStates.AutoSummon_Enabled do
                        local bannerNumber = 1
                        local selected = summonDropdown.Value or "Banner 1 (Mythic)"
                        local numMatch = selected:match("Banner (%d+)")
                        if numMatch then
                            bannerNumber = tonumber(numMatch)
                        end
                        
                        local args = {
                            [1] = summonCountSlider.Value or 1,
                            [2] = tostring(bannerNumber)
                        }
                        
                        pcall(function()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Summon"):InvokeServer(unpack(args))
                        end)
                        
                        task.wait(1)
                        if not _G.FeatureStates.AutoSummon_Enabled then break end
                    end
                end)
            end
        end
    });
end

-- Server Tab
do
    local serverSection = ServerTab:DrawSection({
        Name = "Server Management",
        Position = "left"
    });
    
    local infoParagraph = serverSection:AddParagraph({
        Title = "Server Uptime: Loading... | Player Count: N/A | Max Players: N/A | Ping: N/A ms",
        Content = ""
    });
    
    local serverListDropdown = serverSection:AddDropdown({
        Name = "Server Browser",
        Values = {"No servers available"},
        Default = nil,
        Multi = false,
        Callback = function(value)
            if value then
                local serverId = _G.ServerIDs[value]
                if serverId then
                    task.spawn(function()
                        local notify = Window:Notify({
                            Title = "Teleporting",
                            Content = "Joining server...",
                            Duration = 3
                        });
                        pcall(function()
                            game:GetService("TeleportService"):TeleportToPlaceInstance(
                                game.PlaceId, serverId, player
                            )
                        end)
                    end)
                end
            end
        end
    });
    
    serverSection:AddButton({
        Name = "Copy Server ID",
        Callback = function()
            local jobId = game.JobId or ""
            pcall(function()
                setclipboard(tostring(jobId))
            end)
            Window:Notify({
                Title = "Server ID Copied",
                Content = "Server ID: " .. jobId .. " copied to clipboard.",
                Duration = 3
            });
        end
    });
    
    serverSection:AddButton({
        Name = "Rejoin",
        Callback = function()
            task.spawn(function()
                local notify = Window:Notify({
                    Title = "Rejoining",
                    Content = "Rejoining server...",
                    Duration = 2
                });
                pcall(function()
                    game:GetService("TeleportService"):Teleport(game.PlaceId, player)
                end)
            end)
        end
    });
    
    serverSection:AddButton({
        Name = "Server Hop",
        Callback = function()
            task.spawn(function()
                local notify = Window:Notify({
                    Title = "Server Hop",
                    Content = "Finding a populated server...",
                    Duration = 2
                });
                
                local apiUrl = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100"
                local validServers = {}
                
                local success, response = pcall(function()
                    return game:HttpGet(apiUrl)
                end)
                
                if success then
                    local decoded
                    success, decoded = pcall(function()
                        return game:GetService("HttpService"):JSONDecode(response)
                    end)
                    
                    if success and decoded and decoded.data then
                        for _, server in ipairs(decoded.data) do
                            if server.id ~= game.JobId and server.playing < server.maxPlayers then
                                table.insert(validServers, server)
                            end
                        end
                    end
                end
                
                if #validServers > 0 then
                    table.sort(validServers, function(a, b)
                        return a.playing > b.playing
                    end)
                    
                    local topServerCount = math.min(3, #validServers)
                    local serverIndex = math.random(1, topServerCount)
                    local server = validServers[serverIndex]
                    
                    Window:Notify({
                        Title = "Server Hop",
                        Content = "Joining server with " .. server.playing .. "/" .. server.maxPlayers .. " players",
                        Duration = 2
                    });
                    
                    pcall(function()
                        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, server.id, player)
                    end)
                else
                    Window:Notify({
                        Title = "Server Hop",
                        Content = "No servers found. Joining random server...",
                        Duration = 2
                    });
                    pcall(function()
                        game:GetService("TeleportService"):Teleport(game.PlaceId, player)
                    end)
                end
            end)
        end
    });
    
    -- Server info update loop
    game:GetService("RunService").Heartbeat:Connect(function()
        local uptime = "00:00:00"
        local playerCount = 0
        local maxPlayers = 0
        local ping = 0
        
        local serverTime = "00:00:00"
        if player.PlayerGui and player.PlayerGui:FindFirstChild("Others") and 
           player.PlayerGui.Others:FindFirstChild("ServerTime") then
            serverTime = player.PlayerGui.Others.ServerTime.Text or "00:00:00"
        end
        
        -- Format server time
        local hours, minutes, seconds = serverTime:match("(%d+):(%d+):(%d+)")
        if hours and minutes and seconds then
            uptime = string.format("%02dh %02dm %02ds", tonumber(hours), tonumber(minutes), tonumber(seconds))
        end
        
        -- Get player count
        playerCount = #game:GetService("Players"):GetPlayers()
        
        -- Get max players
        maxPlayers = game:GetService("Players").MaxPlayers
        
        -- Get player ping
        ping = math.floor(player:GetNetworkPing() * 1000 * 2)
        
        infoParagraph:SetTitle("Server Uptime: " .. uptime ..
                              " | Player Count: " .. playerCount ..
                              "/" .. maxPlayers ..
                              " | Ping: " .. ping .. " ms")
    end)
    
    -- Populate server list
    task.spawn(function()
        local servers = {}
        local serverIds = {}
        
        local success, response = pcall(function()
            return game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
        end)
        
        if success then
            local decoded
            success, decoded = pcall(function()
                return game:GetService("HttpService"):JSONDecode(response)
            end)
            
            if success and decoded and decoded.data then
                for _, server in ipairs(decoded.data) do
                    if server.id ~= game.JobId then
                        local option = string.format("Players: %d/%d | Ping: %dms", 
                            server.playing or 0, server.maxPlayers or 0, server.ping or 0)
                        table.insert(servers, option)
                        serverIds[option] = server.id
                    end
                end
            end
        end
        
        if #servers > 0 then
            serverListDropdown:SetValues(servers)
            _G.ServerIDs = serverIds
        else
            serverListDropdown:SetValues({"No servers available"})
        end
    end)
end

-- Credits Tab
do
    local creditsSection = CreditsTab:DrawSection({
        Name = "Credits",
        Position = "left"
    });
    
    local feedbackSection = CreditsTab:DrawSection({
        Name = "Feedback",
        Position = "right"
    });
    
    creditsSection:AddParagraph({
        Title = "Script made by wrdyz.94 on discord",
        Content = "Thank you for using CROW v1.0.5"
    });
    
    creditsSection:AddButton({
        Name = "Copy Discord Username",
        Callback = function()
            pcall(function()
                setclipboard("wrdyz.94")
            end)
            Window:Notify({
                Title = "Discord Username Copied",
                Content = "Discord username has been copied to clipboard",
                Duration = 3
            });
        end
    });
    
    creditsSection:AddButton({
        Name = "Copy Discord Server Link",
        Callback = function()
            pcall(function()
                setclipboard("https://discord.gg/PWJ4cguJDb")
            end)
            Window:Notify({
                Title = "Discord Server Link Copied",
                Content = "Discord Server Link has been copied to clipboard",
                Duration = 3
            });
        end
    });
    
    -- Feedback system
    local rating = nil
    local feedbackText = ""
    local feedbackSent = false
    
    local ratingDropdown = feedbackSection:AddDropdown({
        Name = "Rate this script",
        Values = {"⭐", "⭐⭐", "⭐⭐⭐", "⭐⭐⭐⭐", "⭐⭐⭐⭐⭐"},
        Default = nil,
        Multi = false,
        Callback = function(value)
            rating = value
        end
    });
    
    local feedbackInput = feedbackSection:AddInput({
        Name = "Ideas and Suggestions",
        Default = "",
        Placeholder = "Share your thoughts...",
        Numeric = false,
        Finished = false,
        Callback = function(value)
            feedbackText = value
        end
    });
    
    feedbackSection:AddButton({
        Name = "Submit Feedback",
        Callback = function()
            if feedbackSent then
                Window:Notify({
                    Title = "Feedback Already Sent",
                    Content = "You have already submitted feedback",
                    Duration = 3
                });
                return
            end
            
            if not rating then
                Window:Notify({
                    Title = "Star Rating Required",
                    Content = "Please select a star rating before submitting",
                    Duration = 3
                });
                return
            end
            
            task.spawn(function()
                local webhookUrl = "https://discord.com/api/webhooks/1362115534770147428/Z_0zw2ybMi_Wc2E3sJ49eA-4PrkUxrK8DGli7yhFKsVK3t-LDaAkVkaFpaOqlo1P-yAV"
                local http = game:GetService("HttpService")
                
                local player = game.Players.LocalPlayer
                local placeId = game.PlaceId
                local placeName = game:GetService("MarketplaceService"):GetProductInfo(placeId).Name
                
                local deviceType = "Unknown"
                if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.ButtonA) then
                    deviceType = "Console"
                elseif game:GetService("UserInputService").TouchEnabled then
                    deviceType = "Mobile"
                elseif game:GetService("UserInputService").KeyboardEnabled then
                    deviceType = "PC"
                end
                
                local embed = {
                    title = "Feedback: " .. placeName,
                    description = "Feedback from " .. player.DisplayName,
                    color = 3447003,
                    fields = {
                        {
                            name = "Display Name",
                            value = player.DisplayName,
                            inline = true
                        },
                        {
                            name = "Username",
                            value = player.Name,
                            inline = true
                        },
                        {
                            name = "Player ID",
                            value = tostring(player.UserId),
                            inline = true
                        },
                        {
                            name = "Device",
                            value = deviceType,
                            inline = true
                        },
                        {
                            name = "Rating",
                            value = rating,
                            inline = true
                        },
                        {
                            name = "Comments",
                            value = feedbackText ~= "" and feedbackText or "No comments provided",
                            inline = false
                        },
                        {
                            name = "Place",
                            value = placeName .. " (" .. tostring(placeId) .. ")",
                            inline = true
                        }
                    },
                    footer = {
                        text = "Version: 1.0.5"
                    },
                    timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
                }
                
                local data = {
                    embeds = { embed }
                }
                
                local success, response = pcall(function()
                    request({
                        Url = webhookUrl,
                        Method = "POST",
                        Headers = { ["Content-Type"] = "application/json" },
                        Body = http:JSONEncode(data)
                    })
                end)
                
                if success then
                    feedbackSent = true
                    Window:Notify({
                        Title = "Thank you",
                        Content = "Your feedback has been submitted",
                        Duration = 3
                    });
                else
                    Window:Notify({
                        Title = "Error",
                        Content = "Failed to send feedback. Please try again later.",
                        Duration = 3
                    });
                end
            end)
        end
    });
end

-- Settings Tab
do
    local settingsSection = SettingsTab:DrawSection({
        Name = "UI Settings",
        Position = "left"
    });
    
    local highlightColorPicker = settingsSection:AddColorPicker({
        Name = 'Highlight',
        Default = Color3.fromRGB(52, 152, 219),
        Callback = function(v)
            SoulsHub:ChangeHighlightColor(v)
        end
    }).Link:AddOption();
    
    highlightColorPicker:AddToggle({
        Name = "Rainbow",
        Default = false,
        Callback = function(v)
            _G.RAINBOW = v
        end
    });
    
    highlightColorPicker:AddSlider({
        Name = "Speed",
        Min = 0.01,
        Max = 1,
        Round = 2,
        Default = 0.1,
        Callback = function(v)
            _G.RAINBOW_SPEED = v
        end
    });
    
    settingsSection:AddToggle({
        Name = "Alway Show Tab",
        Default = Window.AlwayShowTab,
        Callback = function(v)
            Window.AlwayShowTab = v
        end
    });
    
    settingsSection:AddButton({
        Name = "Save Config",
        Callback = function()
            FileWatcher:Save()
            Window:Notify({
                Title = "Config Saved",
                Content = "Your configuration has been saved.",
                Duration = 3
            });
        end
    });
    
    settingsSection:AddButton({
        Name = "Load Config",
        Callback = function()
            FileWatcher:Load()
            Window:Notify({
                Title = "Config Loaded",
                Content = "Your configuration has been loaded.",
                Duration = 3
            });
        end
    });
    
    settingsSection:AddButton({
        Name = "Reset Config",
        Callback = function()
            FileWatcher:Reset()
            Window:Notify({
                Title = "Config Reset",
                Content = "Your configuration has been reset.",
                Duration = 3
            });
        end
    });
    
    -- Rainbow color loop
    task.spawn(function()
        local x = 0
        while true do task.wait(_G.RAINBOW_SPEED or 0.1)
            if _G.RAINBOW then
                SoulsHub:ChangeHighlightColor(Color3.fromHSV(x,1,1))
                x = x + 2/255
                if x >= 1 then x = 0 end
            end
        end
    end)
end

-- Update Logs Tab
do
    local logsSection = UpdateLogsTab:DrawSection({
        Name = "Update Logs",
        Position = "left"
    });
    
    logsSection:AddParagraph({
        Title = "CROW v1.0.5 Update Logs",
        Content = "- Added new UI with Souls Hub library\n- Added feedback system with Discord webhook\n- Enhanced server management features\n- Improved autofarm and teleport functionality\n- Added persistent configuration system\n- Added error handling and fallbacks for all features\n- Added rainbow UI theme option\n- Added automatic script persistence"
    });
    
    logsSection:AddParagraph({
        Title = "CROW v1.0.4 Update Logs",
        Content = "- Added server hop feature\n- Added server browser with real-time data\n- Added server info display\n- Improved UI layout\n- Added more error handling"
    });
    
    logsSection:AddParagraph({
        Title = "CROW v1.0.3 Update Logs",
        Content = "- Added summon automation\n- Added story and raid autofarm\n- Added teleport locations\n- Improved UI organization"
    });
end

-- Admin Tab (if applicable)
if isAdmin then
    local adminSection = AdminTab:DrawSection({
        Name = "Admin Tools",
        Position = "left"
    });
    
    adminSection:AddButton({
        Name = "Execute Command",
        Callback = function()
            -- Admin command execution functionality would go here
            Window:Notify({
                Title = "Admin Command",
                Content = "Command executed successfully",
                Duration = 3
            });
        end
    });
    
    adminSection:AddButton({
        Name = "View Player Info",
        Callback = function()
            -- Player info functionality would go here
            Window:Notify({
                Title = "Player Info",
                Content = "Player information displayed",
                Duration = 3
            });
        end
    });
end

-- Initialize configuration
FileWatcher:Init()

-- Final UI setup
Window:Draw()

-- Script persistence mechanism
task.spawn(function()
    local function implementPersistentScript()
        local configFolder = "CROW"
        local gamesFolder = configFolder .. "/games"
        local currentGameId = tostring(game.PlaceId)
        local currentGameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
        
        -- Sanitize game name for folder creation
        local sanitizedGameName = currentGameName:gsub("[^%w%s_-]", ""):gsub("%s+", "_")
        local gameFolder = gamesFolder .. "/" .. sanitizedGameName
        local scriptPath = gameFolder .. "/" .. currentGameId .. ".lua"
        
        -- Create directories if they don't exist
        if not isfolder(configFolder) then
            pcall(function() makefolder(configFolder) end)
        end
        if not isfolder(gamesFolder) then
            pcall(function() makefolder(gamesFolder) end)
        end
        if not isfolder(gameFolder) then
            pcall(function() makefolder(gameFolder) end)
        end
        
        -- Save the script content
        local scriptContent = "loadstring(game:HttpGet('https://pandadevelopment.net/virtual/file/e7f388d3c065df7a'))()"
        pcall(function() writefile(scriptPath, scriptContent) end)
        
        -- Queue for teleport
        local teleportScript = [[
            if not game:IsLoaded() then game.Loaded:Wait() end
            task.wait(1)
            loadstring(game:HttpGet('https://pandadevelopment.net/virtual/file/e7f388d3c065df7a'))()
            queue_on_teleport([[
                loadstring(game:HttpGet('https://pandadevelopment.net/virtual/file/e7f388d3c065df7a'))()
                loadstring(readfile(']] .. scriptPath .. [['))()
            ]])
        ]]
        
        pcall(function() queue_on_teleport(teleportScript) end)
    end
    
    pcall(implementPersistentScript)
end)

-- Blacklist check
task.spawn(function()
    local BlacklistedPlayers = {
        548245499,
        2318524722,
        3564923852
    }
    
    for _, blacklistedId in ipairs(BlacklistedPlayers) do
        if player.UserId == blacklistedId then
            player:Kick("You are blacklisted from using this script. wrdyz.94 On discord for appeal.")
            break
        end
    end
end)

-- Display welcome message
task.spawn(function()
    Window:Notify({
        Title = "CROW v1.0.5",
        Content = "Script loaded successfully! Enjoy the enhanced gameplay experience.",
        Duration = 5
    });
end)
