local SoulsHub = loadstring(game:HttpGet("https://pandadevelopment.net/virtual/file/e7f388d3c065df7a"))()

task.wait(1)

SoulsHub:Loader(nil, 1).yield()

local FileWatcher = SoulsHub:ConfigManager({
    Directory = "SoulsHub",
    Config = "FishIt_Configs"    
})

local Window = SoulsHub.new({
    Keybind = "LeftControl",
})

-- Custom Theme Colors
SoulsHub:ChangeHighlightColor(Color3.fromRGB(85, 235, 169)) -- Teal accent color
SoulsHub.Colors.Background = Color3.fromRGB(28, 32, 40)
SoulsHub.Colors.Container = Color3.fromRGB(38, 42, 50)
SoulsHub.Colors.Text = Color3.fromRGB(240, 240, 245)
SoulsHub.Colors.Disabled = Color3.fromRGB(80, 85, 95)

local watermark = Window:Watermark()

watermark:AddText({
    Icon = "fish",
    Text = "Souls Hub"
})

local vim = watermark:AddText({
    Icon = "clock",
    Text = SoulsHub:GetTimeNow()
})

task.spawn(function()
    while true do task.wait()
        vim:SetText(SoulsHub:GetTimeNow())
    end
end)

watermark:AddText({
    Icon = "server",
    Text = game.JobId
})

Window:Update({
    ExpireDate = SoulsHub:GetDate(tick() + 86400)
})

-- Tabs Creation with proper icons
local Home = Window:DrawTab({
    Icon = "home",
    Name = "Home"
})

local Farm = Window:DrawTab({
    Icon = "fish",
    Name = "Farming"
})

local Auto = Window:DrawTab({
    Icon = "repeat",
    Name = "Automation"
})

local Shop = Window:DrawTab({
    Icon = "shopping-cart",
    Name = "Shop"
})

local Boat = Window:DrawTab({
    Icon = "sailboat",
    Name = "Boats"
})

local Player = Window:DrawTab({
    Icon = "user",
    Name = "Player"
})

local Teleport = Window:DrawTab({
    Icon = "map-pin",
    Name = "Navigation"
})

local Server = Window:DrawTab({
    Icon = "server",
    Name = "Server"
})

-- Home Tab Sections
local homeLeft = Home:DrawSection({
    Name = "Welcome",
    Position = "left"
})

local homeRight = Home:DrawSection({
    Name = "Update Notes",
    Position = "right"
})

homeLeft:AddParagraph({
    Title = "Welcome to Souls Hub",
    Content = "The ultimate Roblox Fish It! automation tool.\nFeatures include auto fishing, auto selling,\nnavigation, boat management, and much more."
})

homeLeft:AddParagraph({
    Title = "Version",
    Content = "v2.0.0 - Premium Edition"
})

homeRight:AddParagraph({
    Title = "Latest Update",
    Content = "[+] Complete UI Overhaul\n[+] Fixed Auto Fishing Mechanics\n[+] Added Island Navigation System\n[+] Enhanced Performance Optimization\n[+] Optimized Memory Usage\n[+] Added Advanced Player Controls"
})

homeRight:AddButton({
    Name = "Join Community",
    Callback = function()
        setclipboard("discord.gg/soulshub")
        SoulsHub:Notification({
            Title = "Copied!",
            Content = "Community link copied to clipboard",
            Icon = "copy",
            Duration = 3
        })
    end
})

-- Farming Tab Sections
local farmLeft = Farm:DrawSection({
    Name = "Fishing",
    Position = "left"
})

local farmRight = Farm:DrawSection({
    Name = "Management",
    Position = "right"
})

-- Advanced Auto Fishing System
local autoFishToggle = farmLeft:AddToggle({
    Name = "Advanced Auto Fishing",
    Default = false,
    Flag = "advanced_auto_fish",
    Callback = function(state)
        getgenv().AdvancedFishing = state
        if state then
            task.spawn(function()
                while getgenv().AdvancedFishing do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        local fishingTool = char and char:FindFirstChild("!!!FISHING_VIEW_MODEL!!!")
                        
                        if hrp and fishingTool then
                            -- Cast rod
                            local ReplicatedStorage = game:GetService("ReplicatedStorage")
                            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                            local chargeRod = Net:WaitForChild("RF/ChargeFishingRod")
                            
                            if chargeRod then
                                chargeRod:InvokeServer(os.clock())
                                task.wait(0.5)
                                
                                -- Perfect catch calculation
                                local perfectX = -0.57187455892563
                                local perfectY = 0.98649686980755
                                local requestMinigame = Net:WaitForChild("RF/RequestFishingMinigameStarted")
                                
                                if requestMinigame then
                                    requestMinigame:InvokeServer(perfectX, perfectY)
                                end
                                
                                -- Complete fishing
                                task.wait(2.5)
                                local fishingCompleted = Net:WaitForChild("RE/FishingCompleted")
                                if fishingCompleted then
                                    fishingCompleted:FireServer()
                                end
                            end
                        end
                    end)
                    task.wait(0.8)
                end
            end)
        end
    end
})

-- Fishing Mode Selection
farmLeft:AddDropdown({
    Name = "Fishing Mode",
    Values = {"Perfect Catch", "Fast Cast", "Balanced"},
    Default = "Perfect Catch",
    Flag = "fishing_mode",
    Callback = function(mode)
        getgenv().FishingMode = mode
    end
})

-- Auto Sell System
local autoSellToggle = farmRight:AddToggle({
    Name = "Auto Sell Items",
    Default = false,
    Flag = "auto_sell_items",
    Callback = function(state)
        getgenv().AutoSellItems = state
        if state then
            task.spawn(function()
                while getgenv().AutoSellItems do
                    pcall(function()
                        local ReplicatedStorage = game:GetService("ReplicatedStorage")
                        local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                        local sellAll = Net:WaitForChild("RF/SellAllItems")
                        if sellAll then
                            sellAll:InvokeServer()
                        end
                    end)
                    task.wait(3)
                end
            end)
        end
    end
})

-- Sell Settings
farmRight:AddSlider({
    Name = "Sell Interval",
    Min = 1,
    Max = 30,
    Default = 3,
    Step = 1,
    Flag = "sell_interval",
    Callback = function(value)
        getgenv().SellInterval = value
    end
})

-- Equipment Management
farmLeft:AddToggle({
    Name = "Auto Equip Best Rod",
    Default = false,
    Flag = "auto_equip_best_rod",
    Callback = function(state)
        getgenv().AutoEquipBestRod = state
        if state then
            task.spawn(function()
                while getgenv().AutoEquipBestRod do
                    pcall(function()
                        local char = workspace:FindFirstChild("Characters")
                        if char then
                            local playerChar = char:FindFirstChild(game.Players.LocalPlayer.Name)
                            if playerChar and not playerChar:FindFirstChild("!!!FISHING_VIEW_MODEL!!!") then
                                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                                local equipTool = Net:WaitForChild("RE/EquipToolFromHotbar")
                                if equipTool then
                                    equipTool:FireServer(1)
                                end
                            end
                        end
                    end)
                    task.wait(2)
                end
            end)
        end
    end
})

-- Farming Statistics
farmRight:AddParagraph({
    Title = "Farming Stats",
    Content = "Fish Caught: 0\nTotal Value: 0 coins"
})

-- Automation Tab Sections
local autoLeft = Auto:DrawSection({
    Name = "Quests",
    Position = "left"
})

local autoRight = Auto:DrawSection({
    Name = "Events",
    Position = "right"
})

-- Deep Sea Quest Automation
autoLeft:AddToggle({
    Name = "Deep Sea Quest Automation",
    Default = false,
    Flag = "deep_sea_quest_auto",
    Callback = function(state)
        getgenv().DeepSeaQuestAuto = state
        if state then
            task.spawn(function()
                while getgenv().DeepSeaQuestAuto do
                    pcall(function()
                        local board = workspace:FindFirstChild("!!! MENU RINGS")
                        if board then
                            board = board:FindFirstChild("Deep Sea Tracker")
                            if board then
                                board = board:FindFirstChild("Board")
                                if board then
                                    local label = board:FindFirstChild("Gui")
                                    if label then
                                        label = label:FindFirstChild("Content")
                                        if label then
                                            label = label:FindFirstChild("Label1")
                                            if label then
                                                local text = label.Text
                                                local percent = tonumber(text:match("(%d+)%%"))
                                                
                                                if percent and percent < 100 then
                                                    -- Teleport to incomplete quest location
                                                    local posNotComplete = CFrame.new(-3563.65063, -279.074219, -1605.75671)
                                                    local char = game.Players.LocalPlayer.Character
                                                    if char and char:FindFirstChild("HumanoidRootPart") then
                                                        char.HumanoidRootPart.CFrame = posNotComplete
                                                    end
                                                elseif percent and percent >= 100 then
                                                    -- Teleport to complete quest location
                                                    local posComplete = CFrame.new(-3698.01001, -135.073914, -1010.34033)
                                                    local char = game.Players.LocalPlayer.Character
                                                    if char and char:FindFirstChild("HumanoidRootPart") then
                                                        char.HumanoidRootPart.CFrame = posComplete
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Aura Boat Quest Automation
autoLeft:AddToggle({
    Name = "Aura Boat Quest Automation",
    Default = false,
    Flag = "aura_boat_quest_auto",
    Callback = function(state)
        getgenv().AuraBoatQuestAuto = state
        if state then
            task.spawn(function()
                while getgenv().AuraBoatQuestAuto do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character or player.CharacterAdded:Wait()
                        local hrp = char:WaitForChild("HumanoidRootPart")
                        local overhead = hrp:WaitForChild("Overhead")
                        local levelLabel = overhead:WaitForChild("LevelContainer"):WaitForChild("Label")
                        
                        local text = levelLabel.Text
                        local level = tonumber(text:match("%d+")) or 0
                        
                        if level >= 200 then
                            -- Activate quest
                            local args = {"AuraQuest"}
                            local ReplicatedStorage = game:GetService("ReplicatedStorage")
                            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                            local activateQuest = Net:WaitForChild("RF/ActivateQuestLine")
                            if activateQuest then
                                activateQuest:InvokeServer(unpack(args))
                            end
                            
                            -- Teleport to quest location
                            local targetCFrame = CFrame.new(88.2434769, 9.53157043, 2685.2605)
                            hrp.CFrame = targetCFrame
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Event Automation
autoRight:AddToggle({
    Name = "Event Automation",
    Default = false,
    Flag = "event_automation",
    Callback = function(state)
        getgenv().EventAutomation = state
        if state then
            task.spawn(function()
                while getgenv().EventAutomation do
                    pcall(function()
                        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
                        if menuRings then
                            local propsFolder = menuRings:FindFirstChild("Props 1") or menuRings:FindFirstChild("Props 2")
                            if propsFolder then
                                local eventObject = propsFolder:FindFirstChild("Shark Hunt") or propsFolder:FindFirstChild("Model")
                                if eventObject then
                                    local player = game.Players.LocalPlayer
                                    local char = player.Character
                                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                                    
                                    if hrp then
                                        hrp.CFrame = eventObject:GetPivot() + Vector3.new(0, 10, 0)
                                    end
                                end
                            end
                        end
                    end)
                    task.wait(1)
                end
            end)
        end
    end
})

-- Shop Tab Sections
local shopLeft = Shop:DrawSection({
    Name = "Equipment",
    Position = "left"
})

local shopRight = Shop:DrawSection({
    Name = "Items",
    Position = "right"
})

-- Rod Purchase System
shopLeft:AddDropdown({
    Name = "Premium Fishing Rods",
    Values = {
        "Carbon Fiber Rod - 900 coins",
        "Grass Master Rod - 1.5k coins",
        "Demascus Elite Rod - 3k coins",
        "Ice Frost Rod - 5k coins",
        "Lucky Charm Rod - 15k coins",
        "Midnight Shadow Rod - 50k coins",
        "Steampunk Precision Rod - 215k coins",
        "Astral Galaxy Rod - 1M coins"
    },
    Default = "Carbon Fiber Rod - 900 coins",
    Flag = "selected_rod",
    Callback = function(value)
        getgenv().SelectedRod = value
    end
})

shopLeft:AddButton({
    Name = "Purchase Selected Rod",
    Callback = function()
        pcall(function()
            local rodMap = {
                ["Carbon Fiber Rod - 900 coins"] = 76,
                ["Grass Master Rod - 1.5k coins"] = 85,
                ["Demascus Elite Rod - 3k coins"] = 77,
                ["Ice Frost Rod - 5k coins"] = 78,
                ["Lucky Charm Rod - 15k coins"] = 79,
                ["Midnight Shadow Rod - 50k coins"] = 80,
                ["Steampunk Precision Rod - 215k coins"] = 6,
                ["Astral Galaxy Rod - 1M coins"] = 5
            }
            
            local rodName = getgenv().SelectedRod or "Carbon Fiber Rod - 900 coins"
            local rodId = rodMap[rodName]
            
            if rodId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseRod = Net:WaitForChild("RF/PurchaseFishingRod")
                
                if purchaseRod then
                    purchaseRod:InvokeServer(rodId)
                    SoulsHub:Notification({
                        Title = "Success",
                        Content = "Rod purchased successfully!",
                        Icon = "check",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Bait Purchase System
shopRight:AddDropdown({
    Name = "Advanced Baits",
    Values = {
        "Topwater Elite Bait - 100 coins",
        "Luck Enhancement Bait - 1k coins",
        "Midnight Shadow Bait - 3k coins",
        "Chroma Spectrum Bait - 290k coins",
        "Dark Matter Bait - 630k coins",
        "Corrupt Dimension Bait - 1.15M coins",
        "Aether Cosmic Bait - 3.70M coins"
    },
    Default = "Topwater Elite Bait - 100 coins",
    Flag = "selected_bait",
    Callback = function(value)
        getgenv().SelectedBait = value
    end
})

shopRight:AddButton({
    Name = "Purchase Selected Bait",
    Callback = function()
        pcall(function()
            local baitMap = {
                ["Topwater Elite Bait - 100 coins"] = 10,
                ["Luck Enhancement Bait - 1k coins"] = 2,
                ["Midnight Shadow Bait - 3k coins"] = 3,
                ["Chroma Spectrum Bait - 290k coins"] = 6,
                ["Dark Matter Bait - 630k coins"] = 8,
                ["Corrupt Dimension Bait - 1.15M coins"] = 15,
                ["Aether Cosmic Bait - 3.70M coins"] = 16
            }
            
            local baitName = getgenv().SelectedBait or "Topwater Elite Bait - 100 coins"
            local baitId = baitMap[baitName]
            
            if baitId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseBait = Net:WaitForChild("RF/PurchaseBait")
                
                if purchaseBait then
                    purchaseBait:InvokeServer(baitId)
                    SoulsHub:Notification({
                        Title = "Success",
                        Content = "Bait purchased successfully!",
                        Icon = "check",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Boats Tab Sections
local boatLeft = Boat:DrawSection({
    Name = "Purchase",
    Position = "left"
})

local boatRight = Boat:DrawSection({
    Name = "Management",
    Position = "right"
})

-- Boat Purchase System
boatLeft:AddDropdown({
    Name = "Premium Boats",
    Values = {
        "Fishing Kayak - 1.1k coins",
        "High-Speed Jetski - 7.5k coins",
        "Highfield Explorer - 25k coins",
        "Speed Demon Boat - 70k coins",
        "Professional Fishing Boat - 180k coins",
        "Luxury Mini Yacht - 1.2M coins",
        "Hyper Velocity Boat - 999 Robux"
    },
    Default = "Fishing Kayak - 1.1k coins",
    Flag = "purchase_boat",
    Callback = function(value)
        getgenv().PurchaseBoat = value
    end
})

boatLeft:AddButton({
    Name = "Purchase Boat",
    Callback = function()
        pcall(function()
            local boatMap = {
                ["Fishing Kayak - 1.1k coins"] = 2,
                ["High-Speed Jetski - 7.5k coins"] = 3,
                ["Highfield Explorer - 25k coins"] = 4,
                ["Speed Demon Boat - 70k coins"] = 5,
                ["Professional Fishing Boat - 180k coins"] = 6,
                ["Luxury Mini Yacht - 1.2M coins"] = 14,
                ["Hyper Velocity Boat - 999 Robux"] = 7
            }
            
            local boatName = getgenv().PurchaseBoat or "Fishing Kayak - 1.1k coins"
            local boatId = boatMap[boatName]
            
            if boatId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseBoat = Net:WaitForChild("RF/PurchaseBoat")
                
                if purchaseBoat then
                    purchaseBoat:InvokeServer(boatId)
                    SoulsHub:Notification({
                        Title = "Success",
                        Content = "Boat purchased successfully!",
                        Icon = "check",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Boat Spawn System
boatRight:AddDropdown({
    Name = "Available Boats",
    Values = {
        "Fishing Kayak",
        "High-Speed Jetski",
        "Highfield Explorer",
        "Speed Demon Boat",
        "Professional Fishing Boat",
        "Luxury Mini Yacht",
        "Hyper Velocity Boat",
        "Dinky Fishing Boat",
        "Aura Spirit Boat",
        "Burger King Boat",
        "Mega Hovercraft",
        "Froen Ice Boat",
        "Cruiser Luxury Boat",
        "Rubber Ducky"
    },
    Default = "Fishing Kayak",
    Flag = "spawn_boat",
    Callback = function(value)
        getgenv().SpawnBoat = value
    end
})

boatRight:AddButton({
    Name = "Spawn Selected Boat",
    Callback = function()
        pcall(function()
            local boatMap = {
                ["Fishing Kayak"] = 2,
                ["High-Speed Jetski"] = 3,
                ["Highfield Explorer"] = 4,
                ["Speed Demon Boat"] = 5,
                ["Professional Fishing Boat"] = 6,
                ["Luxury Mini Yacht"] = 14,
                ["Hyper Velocity Boat"] = 7,
                ["Dinky Fishing Boat"] = 20,
                ["Aura Spirit Boat"] = 17,
                ["Burger King Boat"] = 18,
                ["Mega Hovercraft"] = 19,
                ["Froen Ice Boat"] = 11,
                ["Cruiser Luxury Boat"] = 13,
                ["Rubber Ducky"] = 16
            }
            
            local boatName = getgenv().SpawnBoat or "Fishing Kayak"
            local boatId = boatMap[boatName]
            
            if boatId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local spawnBoat = Net:WaitForChild("RF/SpawnBoat")
                
                if spawnBoat then
                    spawnBoat:InvokeServer(boatId)
                    SoulsHub:Notification({
                        Title = "Success",
                        Content = "Boat spawned successfully!",
                        Icon = "check",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Player Tab Sections
local playerLeft = Player:DrawSection({
    Name = "Enhancements",
    Position = "left"
})

local playerRight = Player:DrawSection({
    Name = "Optimization",
    Position = "right"
})

-- Player Enhancements
playerLeft:AddToggle({
    Name = "Oxygen Bypass",
    Default = false,
    Flag = "oxygen_bypass",
    Callback = function(state)
        pcall(function()
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
            
            if state then
                local equipOxygen = Net:WaitForChild("RF/EquipOxygenTank")
                if equipOxygen then
                    equipOxygen:InvokeServer(105)
                end
            else
                local unequipOxygen = Net:WaitForChild("RF/UnequipOxygenTank")
                if unequipOxygen then
                    unequipOxygen:InvokeServer()
                end
            end
        end)
    end
})

playerLeft:AddToggle({
    Name = "Advanced Fish Radar",
    Default = false,
    Flag = "fish_radar",
    Callback = function(state)
        pcall(function()
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
            local updateRadar = Net:WaitForChild("RF/UpdateFishingRadar")
            
            if updateRadar then
                updateRadar:InvokeServer(state)
            end
        end)
    end
})

-- Performance Optimization
playerRight:AddButton({
    Name = "Performance Boost",
    Callback = function()
        pcall(function()
            local lighting = game:GetService("Lighting")
            lighting.GlobalShadows = false
            lighting.FogEnd = 9e9
            lighting.Brightness = 1
            lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
            lighting.ExposureCompensation = 0
            lighting.ShadowSoftness = 0
            
            -- Disable particles and effects
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Explosion") then
                    obj.Enabled = false
                elseif obj:IsA("Decal") or obj:IsA("Texture") then
                    obj.Transparency = 1
                end
            end
            
            SoulsHub:Notification({
                Title = "Optimized",
                Content = "Performance boost applied successfully!",
                Icon = "zap",
                Duration = 3
            })
        end)
    end
})

playerRight:AddButton({
    Name = "Lag Reduction",
    Callback = function()
        pcall(function()
            local lighting = game:GetService("Lighting")
            lighting.GlobalShadows = false
            lighting.FogEnd = 9e9
            lighting.Brightness = 1
            lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
            lighting.ExposureCompensation = 0
            lighting.ShadowSoftness = 0
            
            -- Disable particles and effects
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Explosion") then
                    obj.Enabled = false
                elseif obj:IsA("Decal") or obj:IsA("Texture") then
                    obj.Transparency = 1
                end
            end
            
            -- Optimize GUI
            local player = game.Players.LocalPlayer
            local playerGui = player:FindFirstChild("PlayerGui")
            if playerGui then
                for _, gui in ipairs(playerGui:GetDescendants()) do
                    if gui:IsA("TextLabel") or gui:IsA("TextButton") then
                        gui.TextScaled = false
                    elseif gui:IsA("ImageLabel") or gui:IsA("ImageButton") then
                        gui.ImageTransparency = 0.5
                    end
                end
            end
            
            SoulsHub:Notification({
                Title = "Optimized",
                Content = "Lag reduction applied successfully!",
                Icon = "zap",
                Duration = 3
            })
        end)
    end
})

-- Navigation Tab Sections
local teleportLeft = Teleport:DrawSection({
    Name = "Islands",
    Position = "left"
})

local teleportRight = Teleport:DrawSection({
    Name = "NPCs",
    Position = "right"
})

-- Island Navigation
teleportLeft:AddDropdown({
    Name = "Island Destinations",
    Values = {
        "Kohana Main Island",
        "Winter Festival Zone",
        "Lost Ancient Isle",
        "Esoteric Mystical Island",
        "Volcanic Crater Island",
        "Coral Reef Paradise",
        "Kohana Volcano Summit",
        "Fisherman's Haven",
        "Esoteric Depths",
        "Tropical Grove",
        "Treasure Vault",
        "Weather Control Station",
        "Sisyphus Monument"
    },
    Default = "Kohana Main Island",
    Flag = "selected_island",
    Callback = function(value)
        getgenv().SelectedIsland = value
    end
})

teleportLeft:AddButton({
    Name = "Teleport Now",
    Callback = function()
        pcall(function()
            local islandMap = {
                ["Kohana Main Island"] = CFrame.new(-642.243561, 16.0354481, 624.918884),
                ["Winter Festival Zone"] = CFrame.new(1687.93079, 6.8625145, 3309.67725),
                ["Lost Ancient Isle"] = CFrame.new(-3660.07031, 26.1918774, -933.131897),
                ["Esoteric Mystical Island"] = CFrame.new(2029.47913, 27.3972206, 1393.52319),
                ["Volcanic Crater Island"] = CFrame.new(973.268372, 7.36203814, 4879.09277),
                ["Coral Reef Paradise"] = CFrame.new(-3134.98511, 20.9564934, 2167.80566),
                ["Kohana Volcano Summit"] = CFrame.new(-525.122925, 24.0000591, 187.470749),
                ["Fisherman's Haven"] = CFrame.new(33.5687256, 17.0335217, 2834.95557),
                ["Esoteric Depths"] = CFrame.new(3152.74707, -1302.72986, 1438.05444),
                ["Tropical Grove"] = CFrame.new(-2046.1554, 6.26801682, 3660.56006),
                ["Treasure Vault"] = CFrame.new(-3599.53491, -266.57373, -1566.98657),
                ["Weather Control Station"] = CFrame.new(-1525.72632, 6.49999952, 1892.23645),
                ["Sisyphus Monument"] = CFrame.new(-3692.22021, -135.574417, -1026.96167)
            }
            
            local islandName = getgenv().SelectedIsland or "Kohana Main Island"
            local islandCFrame = islandMap[islandName]
            
            if islandCFrame then
                local player = game.Players.LocalPlayer
                local char = player.Character or player.CharacterAdded:Wait()
                local hrp = char:FindFirstChild("HumanoidRootPart")
                
                if hrp then
                    char:PivotTo(islandCFrame)
                    SoulsHub:Notification({
                        Title = "Teleported",
                        Content = "Successfully teleported to " .. islandName,
                        Icon = "map-pin",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- NPC Navigation
teleportRight:AddDropdown({
    Name = "NPC Locations",
    Values = {
        "Captain Jones - General Store",
        "McBoatson - Boat Shop",
        "Tim - Fishing Supplies",
        "Dr. Science - Research Lab",
        "Lava Fisher - Volcano Summit"
    },
    Default = "Captain Jones - General Store",
    Flag = "selected_npc",
    Callback = function(value)
        getgenv().SelectedNPC = value
    end
})

teleportRight:AddButton({
    Name = "Find NPC",
    Callback = function()
        pcall(function()
            local npcMap = {
                ["Captain Jones - General Store"] = CFrame.new(-678.315857, 16.4103374, 595.322937),
                ["McBoatson - Boat Shop"] = CFrame.new(-627.383911, 3.04580736, 719.454956),
                ["Tim - Fishing Supplies"] = CFrame.new(-595.170044, 16.3734112, 608.429932),
                ["Dr. Science - Research Lab"] = CFrame.new(-7.82026434, 14.6700287, 2885.70532),
                ["Lava Fisher - Volcano Summit"] = CFrame.new(-595.716797, 59.000061, 135.618927)
            }
            
            local npcName = getgenv().SelectedNPC or "Captain Jones - General Store"
            local npcCFrame = npcMap[npcName]
            
            if npcCFrame then
                local player = game.Players.LocalPlayer
                local char = player.Character or player.CharacterAdded:Wait()
                local hrp = char:FindFirstChild("HumanoidRootPart")
                
                if hrp then
                    char:PivotTo(npcCFrame)
                    SoulsHub:Notification({
                        Title = "Teleported",
                        Content = "Successfully teleported to " .. npcName,
                        Icon = "map-pin",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Server Tab Sections
local serverLeft = Server:DrawSection({
    Name = "Management",
    Position = "left"
})

local serverRight = Server:DrawSection({
    Name = "Utilities",
    Position = "right"
})

-- Server Management
serverLeft:AddToggle({
    Name = "Auto Rejoin Protection",
    Default = false,
    Flag = "auto_rejoin",
    Callback = function(state)
        getgenv().AutoRejoin = state
        if state then
            task.spawn(function()
                while getgenv().AutoRejoin do
                    pcall(function()
                        if not game.Players.LocalPlayer.Character then
                            local TeleportService = game:GetService("TeleportService")
                            TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Server Utilities
serverRight:AddButton({
    Name = "Server Hop",
    Callback = function()
        pcall(function()
            local TeleportService = game:GetService("TeleportService")
            local Players = game:GetService("Players")
            local LocalPlayer = Players.LocalPlayer
            local HttpService = game:GetService("HttpService")
            
            local url = ("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100"):format(game.PlaceId)
            local response = game:HttpGet(url)
            local servers = HttpService:JSONDecode(response)
            
            for _, server in ipairs(servers.data) do
                if server.playing < server.maxPlayers and server.id ~= game.JobId then
                    TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
                    return
                end
            end
            
            SoulsHub:Notification({
                Title = "Error",
                Content = "No available servers found!",
                Icon = "x",
                Duration = 3
            })
        end)
    end
})

serverRight:AddButton({
    Name = "Copy Server ID",
    Callback = function()
        setclipboard(game.JobId)
        SoulsHub:Notification({
            Title = "Copied!",
            Content = "Server ID copied to clipboard",
            Icon = "copy",
            Duration = 3
        })
    end
})

-- Config Manager
local Configs = Window:DrawConfig({
    Name = "Configuration",
    Icon = "folder",
    Config = FileWatcher
})

Configs:Init()

-- Status Tracking
local function updateStatus()
    pcall(function()
        local statusSection = Home:DrawSection({
            Name = "Player Status",
            Position = "left"
        })
        
        local RunService = game:GetService("RunService")
        local Stats = game:GetService("Stats")
        
        local fps = 0
        local ping = 0
        local timePlayed = 0
        local joinTime = os.time()
        
        RunService.Heartbeat:Connect(function()
            fps = math.floor(1 / RunService.Heartbeat:Wait())
            ping = Stats.Network.ServerStatsItem["Data Ping"]:GetValue()
            timePlayed = os.time() - joinTime
            
            local hours = math.floor(timePlayed / 3600)
            local minutes = math.floor((timePlayed % 3600) / 60)
            local seconds = timePlayed % 60
            
            local timeFormatted = string.format("%02d:%02d:%02d", hours, minutes, seconds)
            
            statusSection:AddParagraph({
                Title = "System Status",
                Content = "FPS: " .. fps .. "\nPing: " .. math.floor(ping) .. " ms\nTime: " .. timeFormatted
            })
        end)
    end)
end

task.spawn(updateStatus)

-- Initialize global variables
getgenv().AdvancedFishing = false
getgenv().AutoSellItems = false
getgenv().DeepSeaQuestAuto = false
getgenv().AuraBoatQuestAuto = false
getgenv().EventAutomation = false
getgenv().AutoEquipBestRod = false
getgenv().AutoRejoin = false
getgenv().SelectedRod = "Carbon Fiber Rod - 900 coins"
getgenv().SelectedBait = "Topwater Elite Bait - 100 coins"
getgenv().PurchaseBoat = "Fishing Kayak - 1.1k coins"
getgenv().SpawnBoat = "Fishing Kayak"
getgenv().SelectedIsland = "Kohana Main Island"
getgenv().SelectedNPC = "Captain Jones - General Store"
getgenv().SellInterval = 3
getgenv().FishingMode = "Perfect Catch"

-- Cleanup on character removal
game:GetService("Players").LocalPlayer.CharacterRemoving:Connect(function()
    getgenv().AdvancedFishing = false
    getgenv().AutoSellItems = false
    getgenv().DeepSeaQuestAuto = false
    getgenv().AuraBoatQuestAuto = false
    getgenv().EventAutomation = false
    getgenv().AutoEquipBestRod = false
    
    -- Remove any physics objects
    local char = game.Players.LocalPlayer.Character
    if char then
        for _, obj in ipairs(char:GetDescendants()) do
            if obj:IsA("BodyVelocity") or obj:IsA("BodyGyro") then
                obj:Destroy()
            end
        end
    end
end)

SoulsHub:Notification({
    Title = "Loaded",
    Content = "Souls Hub v2.0.0 loaded successfully!",
    Icon = "check",
    Duration = 5
})

Window:Draw()
