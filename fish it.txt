local SoulsHub = loadstring(game:HttpGet("https://pandadevelopment.net/virtual/file/e7f388d3c065df7a"))()

task.wait(1)

SoulsHub:Loader(nil, 1).yield()

local FileWatcher = SoulsHub:ConfigManager({
    Directory = "SoulsHub",
    Config = "FishIt_Configs"    
})

local Window = SoulsHub.new({
    Keybind = "LeftControl",
})

-- Custom Theme Colors - Souls Ocean Theme
SoulsHub:ChangeHighlightColor(Color3.fromRGB(85, 235, 169)) -- Teal accent color
SoulsHub.Colors.Background = Color3.fromRGB(20, 24, 32)
SoulsHub.Colors.Container = Color3.fromRGB(32, 36, 44)
SoulsHub.Colors.Text = Color3.fromRGB(245, 250, 255)
SoulsHub.Colors.Disabled = Color3.fromRGB(75, 80, 90)
SoulsHub.Colors.Border = Color3.fromRGB(100, 170, 220) -- Ocean Blue

local watermark = Window:Watermark()

watermark:AddText({
    Icon = "fish",
    Text = "Souls Hub"
})

local vim = watermark:AddText({
    Icon = "clock",
    Text = SoulsHub:GetTimeNow()
})

task.spawn(function()
    while true do task.wait()
        vim:SetText(SoulsHub:GetTimeNow())
    end
end)

watermark:AddText({
    Icon = "server",
    Text = game.JobId
})

Window:Update({
    ExpireDate = SoulsHub:GetDate(tick() + 86400)
})

-- Tabs Creation
local Home = Window:DrawTab({
    Icon = "home",
    Name = "Home"
})

local Farm = Window:DrawTab({
    Icon = "fish",
    Name = "Farming"
})

local Quests = Window:DrawTab({
    Icon = "flag",
    Name = "Quests"
})

local Shop = Window:DrawTab({
    Icon = "shopping-cart",
    Name = "Shop"
})

local Boats = Window:DrawTab({
    Icon = "sailboat",
    Name = "Boats"
})

local Player = Window:DrawTab({
    Icon = "user",
    Name = "Player"
})

local Teleport = Window:DrawTab({
    Icon = "map-pin",
    Name = "Teleport"
})

local Server = Window:DrawTab({
    Icon = "server",
    Name = "Server"
})

-- Home Tab Sections
local homeLeft = Home:DrawSection({
    Name = "Welcome",
    Position = "left"
})

local homeRight = Home:DrawSection({
    Name = "Update Notes",
    Position = "right"
})

homeLeft:AddParagraph({
    Title = "Welcome to Souls Hub",
    Content = "The ultimate Fish It! automation tool\nCreated with care by Souls#1337\nfor the ultimate fishing experience."
})

homeLeft:AddParagraph({
    Title = "Version",
    Content = "v2.1 - Ocean Edition"
})

homeRight:AddParagraph({
    Title = "Latest Update",
    Content = "[+] Completely redesigned fishing system\n[+] Natural fishing patterns with anti-ban\n[+] Optimized memory usage\n[+] Added event automation\n[+] Fixed auto-equip functionality\n[+] Added fish analytics dashboard"
})

homeRight:AddButton({
    Name = "Join Community",
    Callback = function()
        setclipboard("discord.gg/soulshub")
        game.StarterGui:SetCore("SendNotification", {
            Title = "Copied!",
            Text = "Community link copied to clipboard",
            Duration = 3
        })
    end
})

-- Farming Tab Sections
local farmLeft = Farm:DrawSection({
    Name = "Fishing",
    Position = "left"
})

local farmRight = Farm:DrawSection({
    Name = "Management",
    Position = "right"
})

-- Natural Auto Fishing System (completely rewritten)
local autoFishToggle = farmLeft:AddToggle({
    Name = "Natural Auto Fishing",
    Default = false,
    Flag = "natural_auto_fishing",
    Callback = function(state)
        getgenv().NaturalFishing = state
        if state then
            task.spawn(function()
                while getgenv().NaturalFishing do
                    pcall(function()
                        local ReplicatedStorage = game:GetService("ReplicatedStorage")
                        local NetFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                        
                        local EquipToolEvent = NetFolder:FindFirstChild("RE/EquipToolFromHotbar")
                        local ChargeFishingRodEvent = NetFolder:FindFirstChild("RF/ChargeFishingRod")
                        local RequestMinigameEvent = NetFolder:FindFirstChild("RF/RequestFishingMinigameStarted")
                        local FishingCompletedEvent = NetFolder:FindFirstChild("RE/FishingCompleted")
                        local CancelFishingInputs = NetFolder:FindFirstChild("RF/CancelFishingInputs")
                        
                        -- Safety check for missing remotes
                        if not (EquipToolEvent and ChargeFishingRodEvent and RequestMinigameEvent and FishingCompletedEvent) then
                            game.StarterGui:SetCore("SendNotification", {
                                Title = "Error",
                                Text = "Fishing remotes missing. Please restart the game.",
                                Duration = 5
                            })
                            getgenv().NaturalFishing = false
                            return
                        end
                        
                        -- Equip fishing rod
                        EquipToolEvent:FireServer(1)
                        task.wait(0.6 + math.random() * 0.2) -- Natural variation
                        
                        -- Charge fishing rod
                        local currentTime = tick()
                        ChargeFishingRodEvent:InvokeServer(nil, nil, nil, currentTime)
                        task.wait(0.2 + math.random() * 0.1)
                        
                        -- Perfect catch with slight randomization (anti-ban)
                        local perfectX = -0.57187455892563 + (math.random() - 0.5) * 0.05
                        local perfectY = 0.98649686980755 + (math.random() - 0.5) * 0.03
                        
                        RequestMinigameEvent:InvokeServer(perfectX, perfectY, currentTime)
                        
                        -- Wait for minigame completion
                        task.wait(2.3 + math.random() * 0.4)
                        
                        -- Complete fishing
                        FishingCompletedEvent:FireServer()
                        
                        -- Natural delay between casts (prevents no-fish bug)
                        local baseDelay = 1.5
                        local randomDelay = math.random() * 0.8
                        task.wait(baseDelay + randomDelay)
                        
                        -- Occasionally take a break (anti-ban)
                        if math.random() < 0.1 then
                            task.wait(math.random(4, 8))
                        end
                    end)
                end
                
                -- Cleanup when disabled
                pcall(function()
                    local ReplicatedStorage = game:GetService("ReplicatedStorage")
                    local NetFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                    local CancelFishingInputs = NetFolder:FindFirstChild("RF/CancelFishingInputs")
                    if CancelFishingInputs then
                        CancelFishingInputs:InvokeServer()
                    end
                end)
            end)
        else
            -- Force cleanup
            pcall(function()
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local unequipTool = Net:WaitForChild("RE/UnequipToolFromHotbar")
                if unequipTool then
                    unequipTool:FireServer()
                end
            end)
        end
    end
})

farmLeft:AddParagraph({
    Title = "About Natural Fishing",
    Content = "This system mimics human fishing patterns with randomized delays and movements to avoid detection. It includes occasional breaks and varying cast positions to prevent the 'no fish' bug that occurs with rapid, robotic fishing patterns."
})

-- Auto Sell System
local autoSellToggle = farmRight:AddToggle({
    Name = "Auto Sell Items",
    Default = false,
    Flag = "auto_sell_items",
    Callback = function(state)
        getgenv().AutoSellItems = state
        if state then
            task.spawn(function()
                while getgenv().AutoSellItems do
                    pcall(function()
                        local ReplicatedStorage = game:GetService("ReplicatedStorage")
                        local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                        local sellAll = Net:WaitForChild("RF/SellAllItems")
                        if sellAll then
                            sellAll:InvokeServer()
                        end
                    end)
                    task.wait(getgenv().SellInterval or 3)
                end
            end)
        end
    end
})

-- Sell Settings
farmRight:AddSlider({
    Name = "Sell Interval",
    Min = 1,
    Max = 30,
    Default = 3,
    Step = 1,
    Flag = "sell_interval",
    Callback = function(value)
        getgenv().SellInterval = value
    end
})

-- Equipment Management
farmLeft:AddToggle({
    Name = "Smart Auto Equip Rod",
    Default = false,
    Flag = "auto_equip_best_rod",
    Callback = function(state)
        getgenv().AutoEquipBestRod = state
        if state then
            task.spawn(function()
                while getgenv().AutoEquipBestRod do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character
                        local hasRod = false
                        
                        if char then
                            if char:FindFirstChild("!!!FISHING_VIEW_MODEL!!!") then
                                hasRod = true
                            else
                                for _, child in ipairs(char:GetChildren()) do
                                    if child:IsA("Tool") and child:FindFirstChild("Rod") then
                                        hasRod = true
                                        break
                                    end
                                end
                            end
                        end
                        
                        if not hasRod then
                            local ReplicatedStorage = game:GetService("ReplicatedStorage")
                            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                            local equipTool = Net:WaitForChild("RE/EquipToolFromHotbar")
                            if equipTool then
                                equipTool:FireServer(1)
                                task.wait(0.5)
                            end
                        end
                    end)
                    task.wait(2)
                end
            end)
        end
    end
})

-- Farming Statistics
farmRight:AddParagraph({
    Title = "Fishing Stats",
    Content = "Fish Caught: 0\nTotal Value: 0 coins"
})

-- Quests Tab Sections
local questsLeft = Quests:DrawSection({
    Name = "Quest Automation",
    Position = "left"
})

local questsRight = Quests:DrawSection({
    Name = "Event Tracking",
    Position = "right"
})

-- Deep Sea Quest Automation
questsLeft:AddToggle({
    Name = "Deep Sea Quest Helper",
    Default = false,
    Flag = "deep_sea_quest_auto",
    Callback = function(state)
        getgenv().DeepSeaQuestAuto = state
        if state then
            task.spawn(function()
                while getgenv().DeepSeaQuestAuto do
                    pcall(function()
                        local board = workspace:FindFirstChild("!!! MENU RINGS")
                        if board then
                            board = board:FindFirstChild("Deep Sea Tracker")
                            if board then
                                board = board:FindFirstChild("Board")
                                if board then
                                    local label = board:FindFirstChild("Gui")
                                    if label then
                                        label = label:FindFirstChild("Content")
                                        if label then
                                            label = label:FindFirstChild("Label1")
                                            if label then
                                                local text = label.Text
                                                local percent = tonumber(text:match("(%d+)%%"))
                                                
                                                if percent and percent < 100 then
                                                    local posNotComplete = CFrame.new(-3563.65063, -279.074219, -1605.75671)
                                                    local player = game.Players.LocalPlayer
                                                    local char = player.Character
                                                    if char and char:FindFirstChild("HumanoidRootPart") then
                                                        char.HumanoidRootPart.CFrame = posNotComplete
                                                    end
                                                elseif percent and percent >= 100 then
                                                    local posComplete = CFrame.new(-3698.01001, -135.073914, -1010.34033)
                                                    local player = game.Players.LocalPlayer
                                                    local char = player.Character
                                                    if char and char:FindFirstChild("HumanoidRootPart") then
                                                        char.HumanoidRootPart.CFrame = posComplete
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Aura Boat Quest Automation
questsLeft:AddToggle({
    Name = "Aura Boat Quest Helper",
    Default = false,
    Flag = "aura_boat_quest_auto",
    Callback = function(state)
        getgenv().AuraBoatQuestAuto = state
        if state then
            task.spawn(function()
                while getgenv().AuraBoatQuestAuto do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character or player.CharacterAdded:Wait()
                        local hrp = char:WaitForChild("HumanoidRootPart")
                        local overhead = hrp:WaitForChild("Overhead")
                        local levelLabel = overhead:WaitForChild("LevelContainer"):WaitForChild("Label")
                        
                        local text = levelLabel.Text
                        local level = tonumber(text:match("%d+")) or 0
                        
                        if level >= 200 then
                            local args = {"AuraQuest"}
                            local ReplicatedStorage = game:GetService("ReplicatedStorage")
                            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                            local activateQuest = Net:WaitForChild("RF/ActivateQuestLine")
                            if activateQuest then
                                activateQuest:InvokeServer(unpack(args))
                            end
                            
                            local targetCFrame = CFrame.new(88.2434769, 9.53157043, 2685.2605)
                            hrp.CFrame = targetCFrame
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Event Automation
questsRight:AddToggle({
    Name = "Event Teleporter",
    Default = false,
    Flag = "event_automation",
    Callback = function(state)
        getgenv().EventAutomation = state
        if state then
            task.spawn(function()
                while getgenv().EventAutomation do
                    pcall(function()
                        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
                        if menuRings then
                            local propsFolder = menuRings:FindFirstChild("Props 1") or menuRings:FindFirstChild("Props 2")
                            if propsFolder then
                                local eventObject = propsFolder:FindFirstChild("Shark Hunt") or propsFolder:FindFirstChild("Model")
                                if eventObject then
                                    local player = game.Players.LocalPlayer
                                    local char = player.Character
                                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                                    
                                    if hrp then
                                        local offset = Vector3.new(0, 10, 0)
                                        hrp.CFrame = eventObject:GetPivot() + offset
                                    end
                                end
                            end
                        end
                    end)
                    task.wait(1)
                end
            end)
        end
    end
})

-- Hunt Status Display
questsRight:AddParagraph({
    Title = "Current Events",
    Content = "Shark Hunt: Not Spawning\nWorm Hunt: Not Spawning\nMegalodon Hunt: Not Spawning"
})

-- Shop Tab Sections
local shopLeft = Shop:DrawSection({
    Name = "Equipment",
    Position = "left"
})

local shopRight = Shop:DrawSection({
    Name = "Items",
    Position = "right"
})

-- Rod Purchase System
shopLeft:AddDropdown({
    Name = "Premium Fishing Rods",
    Values = {
        "Starter Rod - Free",
        "Luck Rod - 250c",
        "Carbon Rod - 900c",
        "Grass Rod - 1.5k",
        "Demascus Rod - 3k",
        "Ice Rod - 5k",
        "Midnight Rod - 50k",
        "Fluorescent Rod - 715k",
        "Astral Rod - 1M"
    },
    Default = "Starter Rod - Free",
    Flag = "selected_rod",
    Callback = function(value)
        getgenv().SelectedRod = value
    end
})

shopLeft:AddButton({
    Name = "Purchase Rod",
    Callback = function()
        pcall(function()
            local rodMap = {
                ["Starter Rod - Free"] = 1,
                ["Luck Rod - 250c"] = 4,
                ["Carbon Rod - 900c"] = 76,
                ["Grass Rod - 1.5k"] = 85,
                ["Demascus Rod - 3k"] = 77,
                ["Ice Rod - 5k"] = 78,
                ["Midnight Rod - 50k"] = 80,
                ["Fluorescent Rod - 715k"] = 5,
                ["Astral Rod - 1M"] = 6
            }
            
            local rodName = getgenv().SelectedRod or "Starter Rod - Free"
            local rodId = rodMap[rodName]
            
            if rodId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseRod = Net:WaitForChild("RF/PurchaseFishingRod")
                
                if purchaseRod then
                    purchaseRod:InvokeServer(rodId)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Success",
                        Text = "Rod purchased successfully!",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Bait Purchase System
shopRight:AddDropdown({
    Name = "Advanced Baits",
    Values = {
        "Topwater Bait - 100c",
        "Luck Bait - 1k",
        "Midnight Bait - 3.5k",
        "Chroma Bait - 290k",
        "Dark Matter Bait - 630k",
        "Corrupt Bait - 1.15M",
        "Aether Bait - 3.70M"
    },
    Default = "Topwater Bait - 100c",
    Flag = "selected_bait",
    Callback = function(value)
        getgenv().SelectedBait = value
    end
})

shopRight:AddButton({
    Name = "Purchase Bait",
    Callback = function()
        pcall(function()
            local baitMap = {
                ["Topwater Bait - 100c"] = 10,
                ["Luck Bait - 1k"] = 2,
                ["Midnight Bait - 3.5k"] = 3,
                ["Chroma Bait - 290k"] = 6,
                ["Dark Matter Bait - 630k"] = 8,
                ["Corrupt Bait - 1.15M"] = 15,
                ["Aether Bait - 3.70M"] = 16
            }
            
            local baitName = getgenv().SelectedBait or "Topwater Bait - 100c"
            local baitId = baitMap[baitName]
            
            if baitId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseBait = Net:WaitForChild("RF/PurchaseBait")
                
                if purchaseBait then
                    purchaseBait:InvokeServer(baitId)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Success",
                        Text = "Bait purchased successfully!",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Boats Tab Sections
local boatsLeft = Boats:DrawSection({
    Name = "Purchase",
    Position = "left"
})

local boatsRight = Boats:DrawSection({
    Name = "Spawn",
    Position = "right"
})

-- Boat Purchase System
boatsLeft:AddDropdown({
    Name = "Premium Boats",
    Values = {
        "Fishing Kayak - 1.1k",
        "High-Speed Jetski - 7.5k",
        "Highfield Explorer - 25k",
        "Speed Demon Boat - 70k",
        "Professional Fishing Boat - 180k",
        "Luxury Mini Yacht - 1.2M",
        "Hyper Velocity Boat - 999R"
    },
    Default = "Fishing Kayak - 1.1k",
    Flag = "purchase_boat",
    Callback = function(value)
        getgenv().PurchaseBoat = value
    end
})

boatsLeft:AddButton({
    Name = "Purchase Boat",
    Callback = function()
        pcall(function()
            local boatMap = {
                ["Fishing Kayak - 1.1k"] = 2,
                ["High-Speed Jetski - 7.5k"] = 3,
                ["Highfield Explorer - 25k"] = 4,
                ["Speed Demon Boat - 70k"] = 5,
                ["Professional Fishing Boat - 180k"] = 6,
                ["Luxury Mini Yacht - 1.2M"] = 14,
                ["Hyper Velocity Boat - 999R"] = 7
            }
            
            local boatName = getgenv().PurchaseBoat or "Fishing Kayak - 1.1k"
            local boatId = boatMap[boatName]
            
            if boatId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local purchaseBoat = Net:WaitForChild("RF/PurchaseBoat")
                
                if purchaseBoat then
                    purchaseBoat:InvokeServer(boatId)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Success",
                        Text = "Boat purchased successfully!",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Boat Spawn System
boatsRight:AddDropdown({
    Name = "Available Boats",
    Values = {
        "Fishing Kayak",
        "High-Speed Jetski",
        "Highfield Explorer",
        "Speed Demon Boat",
        "Professional Fishing Boat",
        "Luxury Mini Yacht",
        "Hyper Velocity Boat",
        "Dinky Fishing Boat",
        "Aura Spirit Boat",
        "Burger King Boat",
        "Mega Hovercraft",
        "Froen Ice Boat",
        "Cruiser Luxury Boat",
        "Rubber Ducky"
    },
    Default = "Fishing Kayak",
    Flag = "spawn_boat",
    Callback = function(value)
        getgenv().SpawnBoat = value
    end
})

boatsRight:AddButton({
    Name = "Spawn Boat",
    Callback = function()
        pcall(function()
            local boatMap = {
                ["Fishing Kayak"] = 2,
                ["High-Speed Jetski"] = 3,
                ["Highfield Explorer"] = 4,
                ["Speed Demon Boat"] = 5,
                ["Professional Fishing Boat"] = 6,
                ["Luxury Mini Yacht"] = 14,
                ["Hyper Velocity Boat"] = 7,
                ["Dinky Fishing Boat"] = 20,
                ["Aura Spirit Boat"] = 17,
                ["Burger King Boat"] = 18,
                ["Mega Hovercraft"] = 19,
                ["Froen Ice Boat"] = 11,
                ["Cruiser Luxury Boat"] = 13,
                ["Rubber Ducky"] = 16
            }
            
            local boatName = getgenv().SpawnBoat or "Fishing Kayak"
            local boatId = boatMap[boatName]
            
            if boatId then
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
                local spawnBoat = Net:WaitForChild("RF/SpawnBoat")
                
                if spawnBoat then
                    spawnBoat:InvokeServer(boatId)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Success",
                        Text = "Boat spawned successfully!",
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Player Tab Sections
local playerLeft = Player:DrawSection({
    Name = "Enhancements",
    Position = "left"
})

local playerRight = Player:DrawSection({
    Name = "Performance",
    Position = "right"
})

-- Player Enhancements
playerLeft:AddToggle({
    Name = "Oxygen Bypass",
    Default = false,
    Flag = "oxygen_bypass",
    Callback = function(state)
        pcall(function()
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
            
            if state then
                local equipOxygen = Net:WaitForChild("RF/EquipOxygenTank")
                if equipOxygen then
                    equipOxygen:InvokeServer(105)
                end
            else
                local unequipOxygen = Net:WaitForChild("RF/UnequipOxygenTank")
                if unequipOxygen then
                    unequipOxygen:InvokeServer()
                end
            end
        end)
    end
})

playerLeft:AddToggle({
    Name = "Advanced Fish Radar",
    Default = false,
    Flag = "fish_radar",
    Callback = function(state)
        pcall(function()
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
            local updateRadar = Net:WaitForChild("RF/UpdateFishingRadar")
            
            if updateRadar then
                updateRadar:InvokeServer(state)
            end
        end)
    end
})

-- Performance Optimization
playerRight:AddDropdown({
    Name = "Optimization Level",
    Values = {"Off", "Light", "Balanced", "Heavy"},
    Default = "Balanced",
    Flag = "optimization_level",
    Callback = function(level)
        getgenv().OptimizationLevel = level
    end
})

playerRight:AddButton({
    Name = "Apply Optimization",
    Callback = function()
        local level = getgenv().OptimizationLevel or "Balanced"
        
        if level == "Off" then
            -- Restore original settings
            if getgenv().OriginalLightingSettings then
                local original = getgenv().OriginalLightingSettings
                game.Lighting.GlobalShadows = original.GlobalShadows
                game.Lighting.FogEnd = original.FogEnd
                game.Lighting.ShadowSoftness = original.ShadowSoftness
                game.Lighting.Brightness = original.Brightness
                game.Lighting.Ambient = original.Ambient
                game.Lighting.OutdoorAmbient = original.OutdoorAmbient
                game.Lighting.ExposureCompensation = original.ExposureCompensation
            end
            
            -- Re-enable particle effects
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") or obj:IsA("Trail") then
                    obj.Enabled = true
                end
            end
            
            game.StarterGui:SetCore("SendNotification", {
                Title = "Optimization",
                Text = "Optimization disabled. Restored original settings.",
                Duration = 3
            })
            return
        end
        
        -- Save original settings
        if not getgenv().OriginalLightingSettings then
            getgenv().OriginalLightingSettings = {
                GlobalShadows = game.Lighting.GlobalShadows,
                FogEnd = game.Lighting.FogEnd,
                ShadowSoftness = game.Lighting.ShadowSoftness,
                Brightness = game.Lighting.Brightness,
                Ambient = game.Lighting.Ambient,
                OutdoorAmbient = game.Lighting.OutdoorAmbient,
                ExposureCompensation = game.Lighting.ExposureCompensation
            }
        end
        
        -- Apply optimization
        if level == "Light" then
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 1000
            game.Lighting.ShadowSoftness = 0.5
            game.Lighting.Brightness = 0.9
            game.Lighting.Ambient = Color3.new(0.2, 0.2, 0.2)
            game.Lighting.OutdoorAmbient = Color3.new(0.3, 0.3, 0.3)
            game.Lighting.ExposureCompensation = 0
            
        elseif level == "Balanced" then
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 500
            game.Lighting.ShadowSoftness = 0
            game.Lighting.Brightness = 0.8
            game.Lighting.Ambient = Color3.new(0.1, 0.1, 0.1)
            game.Lighting.OutdoorAmbient = Color3.new(0.2, 0.2, 0.2)
            game.Lighting.ExposureCompensation = -0.1
            
        elseif level == "Heavy" then
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 200
            game.Lighting.ShadowSoftness = 0
            game.Lighting.Brightness = 0.6
            game.Lighting.Ambient = Color3.new(0, 0, 0)
            game.Lighting.OutdoorAmbient = Color3.new(0.1, 0.1, 0.1)
            game.Lighting.ExposureCompensation = -0.2
        end
        
        -- Disable non-essential particles
        local disabledCount = 0
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Trail") then
                if not obj.Name:match("Essential") and not obj.Name:match("Critical") then
                    obj.Enabled = false
                    disabledCount = disabledCount + 1
                end
            end
        end
        
        game.StarterGui:SetCore("SendNotification", {
            Title = "Optimization",
            Text = level .. " optimization applied! Disabled " .. disabledCount .. " non-essential effects.",
            Duration = 3
        })
    end
})

-- Teleport Tab Sections
local teleportLeft = Teleport:DrawSection({
    Name = "Islands",
    Position = "left"
})

local teleportRight = Teleport:DrawSection({
    Name = "NPCs",
    Position = "right"
})

-- Island Navigation
teleportLeft:AddDropdown({
    Name = "Island Destinations",
    Values = {
        "Kohana Main Island",
        "Winter Festival Zone",
        "Lost Ancient Isle",
        "Esoteric Mystical Island",
        "Volcanic Crater Island",
        "Coral Reef Paradise",
        "Kohana Volcano Summit",
        "Fisherman's Haven",
        "Esoteric Depths",
        "Tropical Grove",
        "Treasure Vault",
        "Weather Control Station",
        "Sisyphus Monument"
    },
    Default = "Kohana Main Island",
    Flag = "selected_island",
    Callback = function(value)
        getgenv().SelectedIsland = value
    end
})

teleportLeft:AddButton({
    Name = "Teleport Now",
    Callback = function()
        pcall(function()
            local islandMap = {
                ["Kohana Main Island"] = CFrame.new(-642.243561, 16.0354481, 624.918884),
                ["Winter Festival Zone"] = CFrame.new(1687.93079, 6.8625145, 3309.67725),
                ["Lost Ancient Isle"] = CFrame.new(-3660.07031, 26.1918774, -933.131897),
                ["Esoteric Mystical Island"] = CFrame.new(2029.47913, 27.3972206, 1393.52319),
                ["Volcanic Crater Island"] = CFrame.new(973.268372, 7.36203814, 4879.09277),
                ["Coral Reef Paradise"] = CFrame.new(-3134.98511, 20.9564934, 2167.80566),
                ["Kohana Volcano Summit"] = CFrame.new(-525.122925, 24.0000591, 187.470749),
                ["Fisherman's Haven"] = CFrame.new(33.5687256, 17.0335217, 2834.95557),
                ["Esoteric Depths"] = CFrame.new(3152.74707, -1302.72986, 1438.05444),
                ["Tropical Grove"] = CFrame.new(-2046.1554, 6.26801682, 3660.56006),
                ["Treasure Vault"] = CFrame.new(-3599.53491, -266.57373, -1566.98657),
                ["Weather Control Station"] = CFrame.new(-1525.72632, 6.49999952, 1892.23645),
                ["Sisyphus Monument"] = CFrame.new(-3692.22021, -135.574417, -1026.96167)
            }
            
            local islandName = getgenv().SelectedIsland or "Kohana Main Island"
            local islandCFrame = islandMap[islandName]
            
            if islandCFrame then
                local player = game.Players.LocalPlayer
                local char = player.Character or player.CharacterAdded:Wait()
                local hrp = char:FindFirstChild("HumanoidRootPart")
                
                if hrp then
                    char:PivotTo(islandCFrame)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Teleported",
                        Text = "Successfully teleported to " .. islandName,
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- NPC Navigation
teleportRight:AddDropdown({
    Name = "NPC Locations",
    Values = {
        "Captain Jones - General Store",
        "McBoatson - Boat Shop",
        "Tim - Fishing Supplies",
        "Dr. Science - Research Lab",
        "Lava Fisher - Volcano Summit"
    },
    Default = "Captain Jones - General Store",
    Flag = "selected_npc",
    Callback = function(value)
        getgenv().SelectedNPC = value
    end
})

teleportRight:AddButton({
    Name = "Find NPC",
    Callback = function()
        pcall(function()
            local npcMap = {
                ["Captain Jones - General Store"] = CFrame.new(-678.315857, 16.4103374, 595.322937),
                ["McBoatson - Boat Shop"] = CFrame.new(-627.383911, 3.04580736, 719.454956),
                ["Tim - Fishing Supplies"] = CFrame.new(-595.170044, 16.3734112, 608.429932),
                ["Dr. Science - Research Lab"] = CFrame.new(-7.82026434, 14.6700287, 2885.70532),
                ["Lava Fisher - Volcano Summit"] = CFrame.new(-595.716797, 59.000061, 135.618927)
            }
            
            local npcName = getgenv().SelectedNPC or "Captain Jones - General Store"
            local npcCFrame = npcMap[npcName]
            
            if npcCFrame then
                local player = game.Players.LocalPlayer
                local char = player.Character or player.CharacterAdded:Wait()
                local hrp = char:FindFirstChild("HumanoidRootPart")
                
                if hrp then
                    char:PivotTo(npcCFrame)
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Teleported",
                        Text = "Successfully teleported to " .. npcName,
                        Duration = 3
                    })
                end
            end
        end)
    end
})

-- Server Tab Sections
local serverLeft = Server:DrawSection({
    Name = "Management",
    Position = "left"
})

local serverRight = Server:DrawSection({
    Name = "Utilities",
    Position = "right"
})

-- Server Management
serverLeft:AddToggle({
    Name = "Auto Rejoin Protection",
    Default = false,
    Flag = "auto_rejoin",
    Callback = function(state)
        getgenv().AutoRejoin = state
        if state then
            task.spawn(function()
                while getgenv().AutoRejoin do
                    pcall(function()
                        if not game.Players.LocalPlayer.Character then
                            local TeleportService = game:GetService("TeleportService")
                            TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
                        end
                    end)
                    task.wait(5)
                end
            end)
        end
    end
})

-- Server Utilities
serverRight:AddButton({
    Name = "Server Hop",
    Callback = function()
        pcall(function()
            local TeleportService = game:GetService("TeleportService")
            local Players = game:GetService("Players")
            local LocalPlayer = Players.LocalPlayer
            local HttpService = game:GetService("HttpService")
            
            local url = ("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100"):format(game.PlaceId)
            local response = game:HttpGet(url)
            local servers = HttpService:JSONDecode(response)
            
            for _, server in ipairs(servers.data) do
                if server.playing < server.maxPlayers and server.id ~= game.JobId then
                    TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
                    return
                end
            end
            
            game.StarterGui:SetCore("SendNotification", {
                Title = "Error",
                Text = "No available servers found!",
                Duration = 3
            })
        end)
    end
})

serverRight:AddButton({
    Name = "Copy Server ID",
    Callback = function()
        setclipboard(game.JobId)
        game.StarterGui:SetCore("SendNotification", {
            Title = "Copied!",
            Text = "Server ID copied to clipboard",
            Duration = 3
        })
    end
})

-- Config Manager
local Configs = Window:DrawConfig({
    Name = "Configuration",
    Icon = "folder",
    Config = FileWatcher
})

Configs:Init()

-- Initialize global variables
getgenv().NaturalFishing = false
getgenv().AutoSellItems = false
getgenv().DeepSeaQuestAuto = false
getgenv().AuraBoatQuestAuto = false
getgenv().EventAutomation = false
getgenv().AutoEquipBestRod = false
getgenv().AutoRejoin = false
getgenv().SelectedRod = "Starter Rod - Free"
getgenv().SelectedBait = "Topwater Bait - 100c"
getgenv().PurchaseBoat = "Fishing Kayak - 1.1k"
getgenv().SpawnBoat = "Fishing Kayak"
getgenv().SelectedIsland = "Kohana Main Island"
getgenv().SelectedNPC = "Captain Jones - General Store"
getgenv().SellInterval = 3
getgenv().OptimizationLevel = "Balanced"

-- Cleanup on character removal
game:GetService("Players").LocalPlayer.CharacterRemoving:Connect(function()
    getgenv().NaturalFishing = false
    getgenv().AutoSellItems = false
    getgenv().DeepSeaQuestAuto = false
    getgenv().AuraBoatQuestAuto = false
    getgenv().EventAutomation = false
    getgenv().AutoEquipBestRod = false
    getgenv().AutoRejoin = false
    
    -- Remove physics objects
    pcall(function()
        local player = game.Players.LocalPlayer
        if player.Character then
            for _, obj in ipairs(player.Character:GetDescendants()) do
                if obj:IsA("BodyVelocity") or obj:IsA("BodyGyro") then
                    obj:Destroy()
                end
            end
        end
    end)
    
    -- Restore lighting settings
    pcall(function()
        local original = getgenv().OriginalLightingSettings
        if original then
            game.Lighting.GlobalShadows = original.GlobalShadows
            game.Lighting.FogEnd = original.FogEnd
            game.Lighting.ShadowSoftness = original.ShadowSoftness
            game.Lighting.Brightness = original.Brightness
            game.Lighting.Ambient = original.Ambient
            game.Lighting.OutdoorAmbient = original.OutdoorAmbient
            game.Lighting.ExposureCompensation = original.ExposureCompensation
        end
    end)
    
    -- Re-enable particle effects
    pcall(function()
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Trail") then
                obj.Enabled = true
            end
        end
    end)
end)

game.StarterGui:SetCore("SendNotification", {
    Title = "Loaded",
    Text = "Souls Hub loaded successfully! Created with care by Souls#1337.",
    Duration = 6
})

Window:Draw()
